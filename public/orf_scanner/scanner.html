<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Dna analyze tool!</title>
    <link rel="stylesheet" href="scanner.css">
</head>

<body>
    <h1>ðŸ’– Hello !</h1>
    <h1>Here u can check your ORF</h1>
    <div style="display:flex; justify-content: space-between; padding-top: 5%;">
        <div style="display:flex; flex-direction: column;">
            <input id="amount" type="number" placeholder="DNA length" />
            <input id="gcPercentage" type="number" placeholder="GC percentage" />
            <button id="process">Generate</button>
        </div>
        <div style="display:flex; flex-direction: column; align-content: center; padding-top: 5%;">
            <div style="width: 80%;" id="generated"></div>
            <div style="width: 80%;" id="parsed"></div>
            <button id="scan">Scann</button>
        </div>
    </div>
    <script>if (window.module) module = window.module;</script>
    <script type="text/javascript">
        // include the ipc module to communicate with main process.
        const ipcRenderer = require('electron').ipcRenderer;
        // Key objects on window
        const amount = document.getElementById('amount');
        const scanBtn = document.getElementById('scan');
        const processBtn = document.getElementById('process');
        const orfGcPercentage = document.getElementById('gcPercentage');
        const parsedContainer = document.getElementById('parsed');
        const generatedContainer = document.getElementById('generated');

        let orf = "";

        processBtn.onclick = (e) => {
            generatedContainer.innerHTML = "<p>Generating...</p>"
            ipcRenderer.invoke('generateOrf', amount.value, orfGcPercentage.value).then(result => {
                orf = result;
                generatedContainer.innerHTML = `<p>${result}</p>`;
            });
        }

        scanBtn.onclick = (e) => {
            parsedContainer.innerHTML = "<p>Processing...</p>";
            ipcRenderer.invoke('parseOrf', orf).then(result => {
                if (result === []) {
                    parsedContainer.innerHTML = '<p>No orf found</p>';
                } else {
                    parsedContainer.innerHTML = result.map(_ => (`<p>${_}</p>`));
                }
            });
        }
    </script>
</body>

</html>